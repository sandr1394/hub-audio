(this["webpackJsonpweb-hub-audio"]=this["webpackJsonpweb-hub-audio"]||[]).push([[0],{219:function(e,t){},220:function(e,t){},274:function(e,t,n){},31:function(e,t,n){"use strict";n.d(t,"Source",(function(){return a}));var a;n(219),n(220);!function(e){e.FIVE9="five9",e.INTERACTIONS="interactions"}(a||(a={}))},402:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(82),i=n.n(c),o=(n(274),n(69)),l=n(27),s=n(93),d=n(483),u=n(92),j=n(526),b=n(484),h=n(485),m=n(150),O=n(477),f=n(486),x=n(470),p=n(498),g=n(504),v=n(502),I=n(158),y=n(505),w=n(506),C=n(488);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var F=a.createElement("g",{id:"Page-1",className:"svg-style",strokeWidth:1,fillRule:"evenodd"},a.createElement("path",{className:"svg-style",d:"M0,0 L4,0 L4,19 L0,19 L0,0 Z M32,0 L36,0 L36,19 L32,19 L32,0 Z M8,7 C10.209139,7 12,8.790861 12,11 L12,19 L8,19 L8,7 Z M40,7 C42.209139,7 44,8.790861 44,11 L44,15 C44,17.209139 42.209139,19 40,19 L40,7 Z M20,19 C17.790861,19 16,17.209139 16,15 L16,7 L20,7 L20,19 Z M24,19 L24,7 L28,7 L28,15 C28,17.209139 26.209139,19 24,19 Z",id:"Combined-Shape"}));function D(e,t){var n=e.title,r=e.titleId,c=T(e,["title","titleId"]);return a.createElement("svg",S({width:"44px",height:"19px",viewBox:"0 0 44 19",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,F)}var N=a.forwardRef(D),k=(n.p,n(46)),A=n.n(k),B="hub-jwt",P={setupInterceptors:function(){A.a.interceptors.request.use((function(e){var t=localStorage.getItem(B);return t?(e.headers.Authorization="Bearer ".concat(t),e):e}),(function(e){throw new Error("Interceptor failed ".concat(e))})),A.a.interceptors.response.use((function(e){return e.headers["hub-jwt"]&&localStorage.setItem(B,e.headers["hub-jwt"]),e}),(function(e){if(e.response.headers["hub-jwt"]&&localStorage.setItem(B,e.response.headers["hub-jwt"]),401===e.response.status){localStorage.removeItem(B);var t=window.location,n=t.pathname,a=t.search,r=n?"?redirect=".concat(encodeURIComponent("".concat(n).concat(a))):"";window.location.href="/".concat(r)}else 404!==e.response.status&&(window.location.href="/audio/server-error");return Promise.reject(e)}))}},L=n(1),E=Object(C.a)({appBar:{color:"#fff"},toolbar:{backgroundColor:"#212121",minHeight:"40px"},iconBox:{alignItems:"center"},title:{flexGrow:1,textAlign:"center"},logo:{width:54,height:18,cursor:"pointer",fill:"#f5f5f5","&:hover":{fill:"#bbb"}}});var R=function(){var e=E();return Object(L.jsx)(v.a,{position:"sticky",className:e.appBar,children:Object(L.jsx)(g.a,{className:e.toolbar,children:Object(L.jsxs)(p.a,{container:!0,alignItems:"center",children:[Object(L.jsx)(p.a,{item:!0,xs:!0,children:Object(L.jsx)(N,{className:e.logo,onClick:function(){window.location.href="/"}})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(I.a,{className:e.title,variant:"h6",children:"Audio Logs"})}),Object(L.jsxs)(p.a,{container:!0,item:!0,xs:!0,justifyContent:"flex-end",children:[Object(L.jsx)(y.a,{color:"inherit",onClick:function(){localStorage.removeItem(B),window.location.href="/"},children:"Logout"}),Object(L.jsx)(w.a,{className:e.iconBox,display:{xs:"none",sm:"flex"},children:Object(L.jsx)(x.a,{fontSize:"large"})})]})]})})})},M=n(507),V=n(508),W=Object(C.a)({container:{height:"calc(100vh - 40px)",display:"flex",justifyContent:"center",alignItems:"center"}});var z=function(){var e=W();return Object(L.jsx)(M.a,{className:e.container,children:Object(L.jsx)(V.a,{"data-testid":"loading-spinner"})})},Y=n(471),U=Object(C.a)({container:{marginTop:50,height:"calc(100vh - 90px)",display:"flex",flexDirection:"column"},content:{flex:1,marginTop:-150,textAlign:"center",alignItems:"center",justifyContent:"center"},info:{marginTop:30,marginBottom:30}});var H=function(){var e=U(),t=Object(l.g)();return Object(L.jsx)(M.a,{className:e.container,children:Object(L.jsxs)(Y.a,{className:e.content,children:[Object(L.jsx)(I.a,{variant:"h2",children:"Server Error"}),Object(L.jsxs)(I.a,{className:e.info,children:["It seems like something wrong with HUB.",Object(L.jsx)("br",{}),"Please contact engineering team to solve this issue."]}),Object(L.jsx)(y.a,{onClick:function(){t.push("/audio")},children:"Return to Main Screen"})]})})},Z=n(17),q=n(513),J=n(514),G=n(512),X=n(491),$=n(23),K=n.n($),Q=n(33),_=n(10),ee=n(149),te=n(36),ne=n(489),ae=n(487),re=n(104),ce=n(117),ie=n(478),oe=n(251),le=n(116),se=n.n(le),de=["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],ue=["+",/1/," ","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],je=r.a.forwardRef((function(e,t){return Object(L.jsx)(se.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:function(e){return t(e?e.inputElement:null)},guide:!1,mask:de,pipe:function(e){return e.replace(/(?!\d)[^\d]*$/,"")}}))})),be=function(e){return Object(le.conformToMask)(e,11===e.length?ue:de,{guide:!1}).conformedValue},he=function(e){return e.replace(/[^\d]/g,"")};var me=function(e){var t=e.onBlur,n=e.onChange,a=Object(oe.a)(e,["onBlur","onChange"]);return Object(L.jsx)(ne.a,Object(Z.a)(Object(Z.a)({label:a.label||"Phone Number",variant:"outlined",type:"tel"},a),{},{onChange:function(e){n&&n(Object(Z.a)(Object(Z.a)({},e),{},{target:Object(Z.a)(Object(Z.a)({},e.target),{},{value:he(e.target.value),id:a.id,name:a.name})}))},onBlur:function(e){t&&t(Object(Z.a)(Object(Z.a)({},e),{},{target:Object(Z.a)(Object(Z.a)({},e.target),{},{value:he(e.target.value),id:a.id,name:a.name})}))},InputProps:{inputComponent:je}}))},Oe=r.a.forwardRef((function(e,t){return Object(L.jsx)(se.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:function(e){return t(e?e.inputElement:null)},guide:!1,mask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Array(e.length).fill(/\d/)}}))}));var fe=function(e){var t=e.maxLength;return Object(L.jsx)(ne.a,Object(Z.a)(Object(Z.a)({type:"text"},e),{},{InputProps:{inputComponent:Oe,inputProps:{maxLength:t}}}))},xe=new Date((new Date).setFullYear((new Date).getFullYear()-7)),pe=te.c().shape({callId:te.b().optional(),segmentId:te.d().optional(),ani:te.d().test("phone-number","Phone number is not valid",(function(e){return!e||10===e.length})),dnis:te.d().test("phone-number","Phone number is not valid",(function(e){return!e||10===e.length})),dateFrom:te.a().nullable().typeError("Please enter a valid date (MM/DD/YYYY)").min(new Date(xe),"Search is available only for the last 7 years").when("dateTo",(function(e,t){return Object(re.a)(e)?t.max(e,"Date should be before Date To"):t.optional().max(new Date,"Please enter a date from the past")})),dateTo:te.a().nullable().typeError("Please enter a valid date (MM/DD/YYYY)").max(Object(ce.a)(new Date),"Please enter a date from the past").when("dateFrom",(function(e,t){return Object(re.a)(e)?t.min(e,"Date should be after Date From"):t.min(new Date(xe),"Search is available only for the last 7 years")}))},[["dateFrom","dateTo"]]),ge=Object(C.a)({divider:{marginTop:24,marginBottom:24,marginLeft:-24,marginRight:-24},actions:{display:"flex",justifyContent:"flex-end"}});function ve(e){var t=e.callId,n=e.segmentId,r=e.ani,c=e.dnis,i=e.dateFrom,o=e.dateTo,l=e.onSubmit,s=ge(),d=Object(a.useState)(""),u=Object(_.a)(d,2),j=u[0],b=u[1],h=Object(ee.a)({initialValues:{callId:t||"",segmentId:n||"",ani:r||"",dnis:c||"",dateFrom:i?new Date(i):null,dateTo:o?new Date(o):null},validationSchema:pe,onSubmit:function(){var e=Object(Q.a)(K.a.mark((function e(t){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.callId||t.segmentId||t.ani||t.dnis||t.dateFrom){e.next=3;break}return b(t.dateTo?"At least one additional field should be filled":"At least one field should be filled"),e.abrupt("return");case 3:l({callId:t.callId||null,segmentId:(null===(n=t.segmentId)||void 0===n?void 0:n.trim())||null,ani:t.ani||null,dnis:t.dnis||null,dateFrom:t.dateFrom?t.dateFrom.toISOString():null,dateTo:t.dateTo?Object(ce.a)(t.dateTo).toISOString():null});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(a.useEffect)((function(){b("")}),[h.values]),Object(L.jsxs)("form",{onSubmit:h.handleSubmit,"data-testid":"interactions-filter",children:[Object(L.jsxs)(p.a,{container:!0,spacing:3,children:[Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(fe,{id:"callId",name:"callId",label:"Call Id",maxLength:19,fullWidth:!0,value:h.values.callId,onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.callId&&Boolean(h.errors.callId),helperText:h.touched.callId&&h.errors.callId})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(ne.a,{id:"segmentId",name:"segmentId",label:"Segment Id",fullWidth:!0,value:h.values.segmentId,onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.segmentId&&Boolean(h.errors.segmentId),helperText:h.touched.segmentId&&h.errors.segmentId})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(me,{id:"ani",name:"ani",label:"Phone Number (ANI)",fullWidth:!0,value:h.values.ani,onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.ani&&Boolean(h.errors.ani),helperText:h.touched.ani&&h.errors.ani})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(me,{id:"dnis",name:"dnis",label:"DNIS",fullWidth:!0,value:h.values.dnis,onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.dnis&&Boolean(h.errors.dnis),helperText:h.touched.dnis&&h.errors.dnis})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(ae.a,{label:"Date from",value:h.values.dateFrom,onChange:function(e){return h.setFieldValue("dateFrom",e)},minDate:xe,maxDate:h.values.dateTo||new Date,renderInput:function(e){return Object(L.jsx)(ne.a,Object(Z.a)(Object(Z.a)({},e),{},{id:"dateFrom",name:"dateFrom",fullWidth:!0,onBlur:h.handleBlur,error:h.touched.dateFrom&&Boolean(h.errors.dateFrom),helperText:h.touched.dateFrom&&h.errors.dateFrom}))}})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(ae.a,{label:"Date to",value:h.values.dateTo,onChange:function(e){return h.setFieldValue("dateTo",e)},minDate:h.values.dateFrom||xe,maxDate:new Date,renderInput:function(e){return Object(L.jsx)(ne.a,Object(Z.a)(Object(Z.a)({},e),{},{id:"dateTo",name:"dateTo",fullWidth:!0,onBlur:h.handleBlur,error:h.touched.dateTo&&Boolean(h.errors.dateTo),helperText:h.touched.dateTo&&h.errors.dateTo}))}})})]}),Object(L.jsx)(ie.a,{className:s.divider}),Object(L.jsxs)(Y.a,{direction:"row",justifyContent:"flex-end",spacing:5,alignItems:"center",children:[j&&Object(L.jsx)(I.a,{color:"error",children:j}),Object(L.jsx)(y.a,{type:"submit",variant:"contained",children:"Submit"})]})]})}ve.defaultProps={callId:"",segmentId:"",ani:"",dnis:"",dateFrom:null,dateTo:null};var Ie=ve,ye=n(55),we=n(490),Ce=n(233),Se=n.n(Ce),Te={getCampaigns:function(){return A.a.get("/audio/api/v1/campaign/all").then((function(e){return e.data}))},getAudioList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;return A.a.get("/audio/api/v1/filter/five9?".concat(e.toString(),"&page=").concat(t,"&size=").concat(n,"&sortField=dateOfCall&sortDirection=DESC")).then((function(e){return e.data}))},searchAgents:function(e){var t=new URLSearchParams;return e.forEach((function(e){return t.append("agentInfo",e)})),A.a.get("/audio/api/v1/agent/?".concat(t.toString())).then((function(e){return e.data}))},getAgent:function(e){return A.a.get("/audio/api/v1/agent/".concat(e)).then((function(e){return e.data}))}},Fe=n(3),De=Object(a.createContext)({campaigns:null,agents:{},audio:{src:null,playing:!1,loading:!1},setCampaigns:function(){},setAgents:function(){},setAudio:function(){},cache:{current:new Map},audioElement:{current:null},currentAudio:{current:null}});var Ne=function(e){var t=Object(a.useContext)(De),n=t.agents,r=t.setAgents;return Object(a.useEffect)((function(){(function(){var t=Object(Q.a)(K.a.mark((function t(){var a;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||n[e]){t.next=5;break}return t.next=3,Te.getAgent(e);case 3:a=t.sent,r(Object(Z.a)(Object(Z.a)({},n),{},Object(Fe.a)({},e,a)));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[n]),[e?n[e]:null,function(e){r(Object(Z.a)(Object(Z.a)({},n),{},Object(Fe.a)({},e.id,e)))}]},ke=function(e,t){return e===t?e||"":"".concat(e," ").concat(t)},Ae=Object(C.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2),marginTop:10},loaderContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:56}}}));var Be=function(e){var t=e.onSelect,n=e.value,c=r.a.useState(!1),i=Object(_.a)(c,2),o=i[0],l=i[1],s=r.a.useState(null),d=Object(_.a)(s,2),u=d[0],j=d[1],b=r.a.useState(""),h=Object(_.a)(b,2),m=h[0],O=h[1],f=o&&!u,x=Ae(),g=Ne(n),v=Object(_.a)(g,2),y=v[0],w=v[1],C=Object(a.useMemo)((function(){return Object(ye.a)(function(){var e=Object(Q.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,Te.searchAgents(t.split(" ").map((function(e){return e.trim()})).filter(Boolean));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),300)}),[]);return Object(a.useEffect)((function(){return function(){C.clear()}}),[]),!n||y?Object(L.jsx)(we.a,{id:"agentId",open:o,getOptionLabel:function(){return ke(null===y||void 0===y?void 0:y.firstName,null===y||void 0===y?void 0:y.lastName)},onOpen:function(){m.trim()&&l(!0)},onClose:function(){l(!1)},filterOptions:function(e){return e},autoComplete:!0,blurOnSelect:!0,includeInputInList:!0,isOptionEqualToValue:function(e,t){return+e.id===+t},options:u||[],loading:f,value:n,inputValue:m,onChange:function(e,n){"string"!==typeof n&&(l(!1),n?(w(n),t(n.id.toString())):t(null))},onInputChange:function(){var e=Object(Q.a)(K.a.mark((function e(t,n,a){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(n),j(null),n.trim()?("input"===a&&l(!0),C(n)):l(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),renderOption:function(e,t){return Object(a.createElement)("li",Object(Z.a)(Object(Z.a)({},e),{},{key:t.id}),Object(L.jsxs)(p.a,{container:!0,alignItems:"center",children:[Object(L.jsx)(p.a,{item:!0,children:Object(L.jsx)(Se.a,{className:x.icon,fontSize:"large"})}),Object(L.jsxs)(p.a,{item:!0,xs:!0,children:[Object(L.jsx)(I.a,{variant:"body1",children:ke(t.firstName,t.lastName)}),Object(L.jsx)(I.a,{variant:"body2",color:"textSecondary",children:t.email})]})]}))},renderInput:function(e){return Object(L.jsx)(ne.a,Object(Z.a)(Object(Z.a)({},e),{},{label:"Agent",name:"agent",onFocus:function(){return m.trim()&&l(!0)},onBlur:function(){l(!1)},InputProps:Object(Z.a)(Object(Z.a)({},e.InputProps),{},{endAdornment:Object(L.jsxs)(L.Fragment,{children:[f?Object(L.jsx)(V.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}):Object(L.jsx)("div",{className:x.loaderContainer,children:Object(L.jsx)(V.a,{"data-testid":"agents-loading"})})};var Pe=function(){var e=Object(a.useContext)(De),t=e.campaigns,n=e.setCampaigns;return Object(a.useEffect)((function(){(function(){var e=Object(Q.a)(K.a.mark((function e(){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,Te.getCampaigns();case 3:a=e.sent,n(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),t},Le=Object(C.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2),marginTop:10},loaderContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:56}}}));var Ee=function(e){var t=e.onSelect,n=e.value,a=Pe(),c=r.a.useState(""),i=Object(_.a)(c,2),o=i[0],l=i[1],s=Le();return a?Object(L.jsx)(we.a,{fullWidth:!0,id:"campaignId",getOptionLabel:function(e){return e.campaignName},options:a,value:n?a.find((function(e){return+e.id===+n})):null,inputValue:o,onChange:function(e,n){"string"!==typeof n&&t(n?n.id.toString():"")},renderInput:function(e){return Object(L.jsx)(ne.a,Object(Z.a)(Object(Z.a)({},e),{},{label:"Campaign",name:"campaignId"}))},onInputChange:function(e,t){return l(t)}}):Object(L.jsx)("div",{className:s.loaderContainer,children:Object(L.jsx)(V.a,{"data-testid":"campaigns-loading"})})},Re=te.c().shape({callId:te.b().optional(),sessionId:te.d().optional(),ani:te.d().test("phone-number","Phone number is not valid",(function(e){return!e||10===e.length})),dnis:te.d().test("phone-number","Phone number is not valid",(function(e){return!e||10===e.length})),agentId:te.d().nullable().optional(),campaignId:te.d().optional(),dateFrom:te.a().nullable().typeError("Please enter a valid date (MM/DD/YYYY)").min(new Date(xe),"Search is available only for the last 7 years").when("dateTo",(function(e,t){return Object(re.a)(e)?t.max(e,"Date should be before Date To"):t.optional().max(new Date,"Please enter a date from the past")})),dateTo:te.a().nullable().typeError("Please enter a valid date (MM/DD/YYYY)").max(Object(ce.a)(new Date),"Please enter a date from the past").when("dateFrom",(function(e,t){return Object(re.a)(e)?t.min(e,"Date should be after Date From"):t.min(new Date(xe),"Search is available only for the last 7 years")}))},[["dateFrom","dateTo"]]),Me=Object(C.a)({divider:{marginTop:24,marginBottom:24,marginLeft:-24,marginRight:-24},actions:{display:"flex",justifyContent:"flex-end"},loaderContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:56}});function Ve(e){var t=e.callId,n=e.sessionId,r=e.ani,c=e.dnis,i=e.agentId,o=e.campaignId,l=e.dateFrom,s=e.dateTo,d=e.onSubmit,u=Me(),j=Object(a.useState)(""),b=Object(_.a)(j,2),h=b[0],m=b[1],O=Object(ee.a)({initialValues:{callId:t||"",sessionId:n||"",ani:r||"",dnis:c||"",agentId:i||null,campaignId:o||"",dateFrom:l?new Date(l):null,dateTo:s?new Date(s):null},validationSchema:Re,onSubmit:function(){var e=Object(Q.a)(K.a.mark((function e(t){var n,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.callId||t.sessionId||t.agentId||t.campaignId||t.ani||t.dnis||t.dateFrom){e.next=3;break}return m(t.dateTo?"At least one additional field should be filled":"At least one field should be filled"),e.abrupt("return");case 3:d({callId:t.callId||null,sessionId:(null===(n=t.sessionId)||void 0===n?void 0:n.trim())||null,ani:t.ani||null,dnis:t.dnis||null,agentId:t.agentId||null,campaignId:t.campaignId||null,dateFrom:(null===(a=t.dateFrom)||void 0===a?void 0:a.toISOString())||null,dateTo:t.dateTo?Object(ce.a)(t.dateTo).toISOString():null});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(a.useEffect)((function(){m("")}),[O.values]),Object(L.jsxs)("form",{onSubmit:O.handleSubmit,"data-testid":"five9-filter",children:[Object(L.jsxs)(p.a,{container:!0,spacing:3,children:[Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(fe,{id:"callId",name:"callId",label:"Call Id",maxLength:19,fullWidth:!0,value:O.values.callId,onChange:O.handleChange,onBlur:O.handleBlur,error:O.touched.callId&&Boolean(O.errors.callId),helperText:O.touched.callId&&O.errors.callId})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(ne.a,{id:"sessionId",name:"sessionId",label:"Session Id",fullWidth:!0,value:O.values.sessionId,onChange:O.handleChange,onBlur:O.handleBlur,error:O.touched.sessionId&&Boolean(O.errors.sessionId),helperText:O.touched.sessionId&&O.errors.sessionId})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(Be,{value:O.values.agentId,onSelect:function(e){return O.setFieldValue("agentId",e)}})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(Ee,{value:O.values.campaignId,onSelect:function(e){return O.setFieldValue("campaignId",e)}})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(me,{id:"ani",name:"ani",label:"Phone Number (ANI)",fullWidth:!0,value:O.values.ani,onChange:O.handleChange,onBlur:O.handleBlur,error:O.touched.ani&&Boolean(O.errors.ani),helperText:O.touched.ani&&O.errors.ani})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(me,{id:"dnis",name:"dnis",label:"DNIS",fullWidth:!0,value:O.values.dnis,onChange:O.handleChange,onBlur:O.handleBlur,error:O.touched.dnis&&Boolean(O.errors.dnis),helperText:O.touched.dnis&&O.errors.dnis})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(ae.a,{label:"Date from",value:O.values.dateFrom,onChange:function(e){return O.setFieldValue("dateFrom",e)},minDate:xe,maxDate:O.values.dateTo||new Date,renderInput:function(e){return Object(L.jsx)(ne.a,Object(Z.a)(Object(Z.a)({},e),{},{id:"dateFrom",name:"dateFrom",fullWidth:!0,onBlur:O.handleBlur,error:O.touched.dateFrom&&Boolean(O.errors.dateFrom),helperText:O.touched.dateFrom&&O.errors.dateFrom}))}})}),Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsx)(ae.a,{label:"Date to",value:O.values.dateTo,onChange:function(e){return O.setFieldValue("dateTo",e)},minDate:O.values.dateFrom||xe,maxDate:new Date,renderInput:function(e){return Object(L.jsx)(ne.a,Object(Z.a)(Object(Z.a)({},e),{},{id:"dateTo",name:"dateTo",fullWidth:!0,onBlur:O.handleBlur,error:O.touched.dateTo&&Boolean(O.errors.dateTo),helperText:O.touched.dateTo&&O.errors.dateTo}))}})})]}),Object(L.jsx)(ie.a,{className:u.divider}),Object(L.jsxs)(Y.a,{direction:"row",justifyContent:"flex-end",spacing:5,alignItems:"center",children:[h&&Object(L.jsx)(I.a,{color:"error",children:h}),Object(L.jsx)(y.a,{type:"submit",variant:"contained",children:"Submit"})]})]})}Ve.defaultProps={callId:"",sessionId:"",ani:"",dnis:"",agentId:null,campaignId:null,dateFrom:null,dateTo:null};var We=Ve,ze=function(e){var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var n=Object(_.a)(e,2),a=n[0],r=n[1];r&&t.set(a,r)})),"/audio/list/interactions?".concat(t.toString())},Ye=function(e){var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var n=Object(_.a)(e,2),a=n[0],r=n[1];r&&t.set(a,r)})),"/audio/list/five9?".concat(t.toString())},Ue=Object(C.a)({card:{marginTop:150},content:{padding:24,display:"flex",justifyContent:"center",alignItems:"center"}});function He(e){return Object(L.jsx)(G.a,Object(Z.a)({component:o.b},e))}var Ze=function(){var e=Ue(),t=Object(l.h)(),n=Object(l.g)();return Object(L.jsx)(M.a,{maxWidth:"md",children:Object(L.jsxs)(q.a,{className:e.card,children:[Object(L.jsxs)(X.a,{variant:"fullWidth",textColor:"primary",indicatorColor:"primary",value:t.pathname.includes("five9")?1:0,children:[Object(L.jsx)(He,{label:"Interactions",to:"/audio/interactions"}),Object(L.jsx)(He,{label:"Five9",to:"/audio/five9"})]}),Object(L.jsx)(J.a,{className:e.content,children:Object(L.jsx)(a.Suspense,{fallback:Object(L.jsx)(z,{}),children:Object(L.jsxs)(l.d,{children:[Object(L.jsx)(l.b,{path:"/audio/interactions",children:Object(L.jsx)(Ie,{onSubmit:function(e){n.push(ze(e))}})}),Object(L.jsx)(l.b,{path:"/audio/five9",children:Object(L.jsx)(We,{onSubmit:function(e){n.push(Ye(e))}})}),Object(L.jsx)(l.a,{from:"/audio",exact:!0,to:"/audio/interactions"}),Object(L.jsx)(l.a,{from:"/audio/**",to:"/audio/interactions"})]})})})]})})},qe=n(18),Je=n(520),Ge=n(521),Xe=n(522),$e=n(518),Ke=n(519),Qe=n(515),_e=n(480),et=n(511),tt=n(495),nt=n(523),at=n(524),rt=n(525),ct=n(497),it=n(244),ot=n.n(it),lt=n(250),st=n(120),dt=n.n(st),ut=n(146),jt=n.n(ut),bt=n(245),ht=n.n(bt),mt=n(246),Ot=n.n(mt),ft=n(247),xt=n.n(ft),pt={getAudioList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;return A.a.get("/audio/api/v1/filter/interactions?".concat(e.toString(),"&page=").concat(t,"&size=").concat(n,"&sortField=dateOfCall&sortDirection=DESC")).then((function(e){return e.data}))}},gt=n(31),vt=n(65),It=n(479),yt=n(494),wt=n(249),Ct=n(516),St=n(481),Tt=n(482),Ft=n(239),Dt=n.n(Ft),Nt=n(238),kt=n.n(Nt),At=n(235),Bt=n.n(At),Pt=n(236),Lt=n.n(Pt),Et=n(237),Rt=n.n(Et),Mt=n(240),Vt=n.n(Mt),Wt=n(242),zt=n.n(Wt);var Yt=function(){var e=Object(a.useContext)(De),t=e.audio,n=e.setAudio,r=e.audioElement,c=e.currentAudio,i=e.cache,o=Object(l.i)().source,s=function(){var e=Object(Q.a)(K.a.mark((function e(a){var l,s,d,u;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="/audio/api/v1/".concat(o,"/getaudio/").concat(a.id),c.current=Object(Z.a)({},a),s===t.src){e.next=18;break}if(r.current&&(r.current.src=""),n({src:s,playing:!1,loading:!0}),!i.current.has(s)){e.next=9;break}u=i.current.get(s),e.next=14;break;case 9:return e.next=11,A.a.get(s,{responseType:"blob"}).then((function(e){return e.data}));case 11:u=e.sent,i.current.set(s,u),i.current.size>10&&i.current.delete(Array.from(i.current.keys())[0]);case 14:if((null===(d=c.current)||void 0===d?void 0:d.id)===a.id){e.next=16;break}return e.abrupt("return");case 16:r.current=new Audio(URL.createObjectURL(u)),r.current.onended=function(){n({src:s,playing:!1,loading:!1})};case 18:null===(l=r.current)||void 0===l||l.play().then((function(){n({src:s,playing:!0,loading:!1})})).catch((function(){n({src:s,playing:!1,loading:!1})}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e;null===(e=r.current)||void 0===e||e.pause(),n(Object(Z.a)(Object(Z.a)({},t),{},{playing:!1,loading:!1}))};return Object(Z.a)(Object(Z.a)({},t),{},{audioElement:r.current,currentAudio:c.current,play:s,pause:d,toggle:function(e){var n,a,r;(null===(n=c.current)||void 0===n?void 0:n.id)===e.id&&t.playing&&d(),(null===(a=c.current)||void 0===a?void 0:a.id)!==e.id||t.playing||s(e),(null===(r=c.current)||void 0===r?void 0:r.id)!==e.id&&s(e)},clear:function(){r.current&&(r.current.src=""),r.current=null,c.current=null,n({src:null,playing:!1,loading:!1})}})},Ut=n(234);var Ht=function(e){var t=Object(Ut.a)(new Date(0),e);return Object(lt.a)(t,"mm:ss")},Zt=Object(C.a)({card:{padding:24,height:180,width:"70%",margin:"auto",display:"flex",flexDirection:"column",justifyContent:"flex-end",opacity:.8,boxShadow:"none",alignItems:"center",borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopRightRadius:20,borderTopLeftRadius:20},durationCard:{padding:"12px 24px 10px 24px",height:50,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center"},durationContainer:{alignSelf:"flex-end"},volumeTooltip:Object(Fe.a)({},"& .".concat(vt.a.tooltip),{width:200,padding:"5px 10px 0px 10px"}),noCallSelected:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-around",marginBottom:10}});var qt=function(){var e=Zt(),t=Yt(),n=t.play,c=t.pause,i=t.currentAudio,o=t.audioElement,l=t.playing,s=t.loading,d=Object(a.useState)(0),u=Object(_.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(),m=Object(_.a)(h,2),O=m[0],f=m[1],x=Object(a.useRef)(0),g=Object(a.useState)(!1),v=Object(_.a)(g,2),y=v[0],w=v[1],C=Object(a.useState)(.5),S=Object(_.a)(C,2),T=S[0],F=S[1],D=Object(a.useState)(1),N=Object(_.a)(D,2),k=N[0],A=N[1],B=r.a.useState(null),P=Object(_.a)(B,2),E=P[0],R=P[1],M=Boolean(E),V=function e(){if(!(null===o||void 0===o?void 0:o.paused)){var t=Math.floor((null===o||void 0===o?void 0:o.currentTime)||0);b((function(){return t}))}x.current=requestAnimationFrame(e)};return Object(a.useEffect)((function(){return b(0),o&&(o.volume=T),(null===o||void 0===o?void 0:o.playbackRate)&&A(o.playbackRate),i&&f(i.callDuration),i&&o&&(x.current=requestAnimationFrame(V)),function(){return cancelAnimationFrame(x.current)}}),[o,i]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(q.a,{className:e.card,"data-testid":"player-info",children:[Object(L.jsx)("div",{className:e.noCallSelected,children:i?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(I.a,{children:Object(L.jsxs)("b",{children:[i.callId,"-",i.segmentId||i.sessionId]})}),Object(L.jsxs)(I.a,{textAlign:"center",children:["ANI: ",be(i.ani)," ",i.agentFirstName&&"/ Agent: ".concat(ke(i.agentFirstName,i.agentLastName))]}),Object(L.jsxs)(I.a,{variant:"body2",textAlign:"center",children:["Time of call: ",Object(lt.a)(new Date(i.dateOfCall),"MM/dd/yyyy HH:mm:ss")]})]}):Object(L.jsx)(I.a,{children:Object(L.jsx)("b",{children:"No call selected."})})}),Object(L.jsxs)(p.a,{container:!0,spacing:5,justifyContent:"center",alignItems:"center",children:[Object(L.jsx)(p.a,{item:!0,children:Object(L.jsx)(It.a,{onClickAway:function(){return w(!1)},children:Object(L.jsx)("div",{children:Object(L.jsx)(_e.a,{PopperProps:{disablePortal:!0},onClose:function(){return w(!1)},open:y,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,arrow:!0,classes:{popper:e.volumeTooltip},placement:"top",title:Object(L.jsx)(yt.a,{value:T,min:0,max:1,step:.1,"aria-label":"Volume",onChange:function(e,t){return!Array.isArray(t)&&(n=t,o&&(o.volume=n),void F(n));var n}}),children:Object(L.jsxs)(Qe.a,{size:"small",color:"secondary",onClick:function(){return w(!0)},disabled:!i||s,"data-testid":"volume",children:[T>=.7&&Object(L.jsx)(Bt.a,{}),T<.7&&T>0&&Object(L.jsx)(Lt.a,{}),0===T&&Object(L.jsx)(Rt.a,{})]})})})})}),Object(L.jsx)(p.a,{item:!0,children:Object(L.jsx)(Qe.a,{size:"medium",color:"secondary",onClick:function(){o&&(o.currentTime=j-10,b(j-10))},disabled:!i||s,"data-testid":"replay",children:Object(L.jsx)(kt.a,{sx:{fontSize:30}})})}),Object(L.jsx)(p.a,{item:!0,children:i&&l?Object(L.jsx)(Qe.a,{color:"secondary",onClick:function(){return c()},"data-testid":"pause",children:Object(L.jsx)(jt.a,{fontSize:"large"})}):Object(L.jsx)(Qe.a,{color:"secondary",onClick:function(){return i&&n(i)},disabled:!i||s,"data-testid":"play",children:Object(L.jsx)(dt.a,{fontSize:"large"})})}),Object(L.jsx)(p.a,{item:!0,children:Object(L.jsx)(Qe.a,{size:"medium",color:"secondary",onClick:function(){if(o&&i){var e=j+10>i.callDuration?i.callDuration:j+10;o.currentTime=e,b(e)}},disabled:!i||s,"data-testid":"forward",children:Object(L.jsx)(Dt.a,{sx:{fontSize:30}})})}),Object(L.jsxs)(p.a,{item:!0,children:[Object(L.jsx)(Qe.a,{id:"rate-button",size:"small",color:"secondary",onClick:function(e){return R(e.currentTarget)},disabled:!i||s,"data-testid":"rate",children:Object(L.jsx)(Vt.a,{})}),Object(L.jsx)(wt.a,{id:"rate-menu",anchorEl:E,open:M,onClose:function(){return R(null)},MenuListProps:{"aria-labelledby":"rate-button"},children:[2,1,.5].map((function(e){return Object(L.jsxs)(Ct.a,{onClick:function(){return t=e,o&&(o.playbackRate=t),A(t),void R(null);var t},children:[Object(L.jsx)(St.a,{children:k===e&&Object(L.jsx)(zt.a,{})}),Object(L.jsxs)(Tt.a,{children:["x",e]})]},e)}))})]})]})]}),Object(L.jsx)(q.a,{className:e.durationCard,children:Object(L.jsxs)(Y.a,{direction:"row",spacing:2,sx:{width:"100%"},children:[Object(L.jsx)(I.a,{"data-testid":"player-current-time",children:Ht(j)}),Object(L.jsx)(yt.a,{size:"small",id:"player-slider",value:j,min:0,disabled:!i||s,max:O,onChange:function(e,t){return!Array.isArray(t)&&function(e){o&&(o.currentTime=e),b(e)}(t)}}),Object(L.jsx)(I.a,{textAlign:"right","data-testid":"player-duration",children:O&&Ht(O)})]})})]})};var Jt=function(e){var t=e.source,n=e.filterParams,a=e.submit,r=e.close,c=Object(l.g)(),i=Object(l.h)();return Object(L.jsxs)(L.Fragment,{children:[t===gt.Source.INTERACTIONS&&Object(L.jsx)(Ie,{callId:n.callId,segmentId:n.segmentId,ani:n.ani,dnis:n.dnis,dateFrom:n.dateFrom,dateTo:n.dateTo,onSubmit:function(e){var t=ze(e);r(),"".concat(i.pathname).concat(i.search)!==t&&(a(),c.push(t))}}),t===gt.Source.FIVE9&&Object(L.jsx)(We,{callId:n.callId,sessionId:n.sessionId,ani:n.ani,dnis:n.dnis,agentId:n.agentId,campaignId:n.campaignId,dateFrom:n.dateFrom,dateTo:n.dateTo,onSubmit:function(e){var t=Ye(e);r(),"".concat(i.pathname).concat(i.search)!==t&&(a(),c.push(t))}})]})};var Gt=function(e){var t=e.callId,n=e.segmentId,a=e.ani,r=e.dnis,c=e.dateTo,i=e.dateFrom;return Object(L.jsxs)(p.a,{container:!0,spacing:2,children:[t&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Call Id:"})," ",t]})}),n&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Segment Id:"})," ",n]})}),a&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Phone Number (ANI):"})," ",be(a)]})}),r&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"DNIS:"})," ",be(r)]})}),i&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Date:"})," ","from ".concat(Object(lt.a)(new Date(i),"MM/dd/yyyy")," to "),Object(lt.a)(c?new Date(c):new Date,"MM/dd/yyyy")]})})]})};var Xt=function(e){var t,n=e.callId,a=e.sessionId,r=e.ani,c=e.dnis,i=e.agentId,o=e.campaignId,l=e.dateTo,s=e.dateFrom,d=Ne(i),u=Object(_.a)(d,1)[0],j=Pe();return Object(L.jsxs)(p.a,{container:!0,spacing:2,children:[n&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Call Id:"})," ",n]})}),a&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Session Id:"})," ",a]})}),i&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Agent:"})," ",u?ke(u.firstName,u.lastName):Object(L.jsx)(V.a,{"data-testid":"filter-info-agent-loading",size:16})]})}),o&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Campaign:"})," ",j?null===(t=j.find((function(e){return+e.id===+o})))||void 0===t?void 0:t.campaignName:Object(L.jsx)(V.a,{"data-testid":"filter-info-campaign-loading",size:16})]})}),r&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Phone Number (ANI):"})," ",be(r)]})}),c&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"DNIS:"})," ",be(c)]})}),s&&Object(L.jsx)(p.a,{item:!0,xs:6,children:Object(L.jsxs)(I.a,{children:[Object(L.jsx)("b",{children:"Date:"})," ","from ".concat(Object(lt.a)(new Date(s),"MM/dd/yyyy")," to "),Object(lt.a)(l?new Date(l):new Date,"MM/dd/yyyy")]})})]})};var $t=function(e){var t=e.source,n=e.filterParams;return Object(L.jsxs)(L.Fragment,{children:[t===gt.Source.INTERACTIONS&&Object(L.jsx)(Gt,{callId:n.callId,segmentId:n.segmentId,ani:n.ani,dnis:n.dnis,dateFrom:n.dateFrom||"",dateTo:n.dateTo||""}),t===gt.Source.FIVE9&&Object(L.jsx)(Xt,{callId:n.callId,sessionId:n.sessionId,ani:n.ani,dnis:n.dnis,agentId:n.agentId,campaignId:n.campaignId,dateFrom:n.dateFrom||"",dateTo:n.dateTo||""})]})},Kt=n(517);var Qt=function(e){var t=e.canDownload,n=Object(l.i)().source;return Object(L.jsx)(Kt.a,{children:Object(L.jsxs)($e.a,{children:[Object(L.jsx)(Ke.a,{children:"Call Id"}),n===gt.Source.INTERACTIONS&&Object(L.jsx)(Ke.a,{children:"Segment Id"}),n===gt.Source.FIVE9&&Object(L.jsx)(Ke.a,{children:"Session Id"}),n===gt.Source.FIVE9&&Object(L.jsx)(Ke.a,{children:"Agent"}),n===gt.Source.FIVE9&&Object(L.jsx)(Ke.a,{children:"Campaign"}),Object(L.jsx)(Ke.a,{children:"Ani"}),Object(L.jsx)(Ke.a,{children:"Date of Call"}),Object(L.jsx)(Ke.a,{}),Object(L.jsx)(Ke.a,{}),t&&Object(L.jsx)(Ke.a,{})]})})},_t=n(243);var en=function(){var e=Object(a.useState)(!1),t=Object(_.a)(e,2),n=t[0],r=t[1],c=localStorage.getItem("hub-jwt");return!!c&&(Object(a.useEffect)((function(){(function(){var e=Object(Q.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(_t.a)(c),n=t.roles.map((function(e){return e.name})),r(n.some((function(e){return"Audio Download User"===e})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),n)},tn={downloadAudio:function(e,t){return A.a.get("/audio/api/v1/".concat(e,"/downloadaudio/").concat(t),{responseType:"blob"}).then((function(e){var t=e.data,n=e.headers["content-disposition"].split("filename=")[1].split(";")[0],a=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=a,r.download=n,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}))}},nn=Object(C.a)((function(e){return{container:{marginTop:50,height:"calc(100vh - 90px)",display:"flex",flexDirection:"column"},card:{marginTop:10,padding:24},filterInfo:{flex:1,alignSelf:"center"},table:{marginTop:24,flex:1,scrollBehavior:"smooth"},selectedRow:{backgroundColor:"".concat(e.palette.primary.main,"55")},longIdCell:Object(Fe.a)({},e.breakpoints.down("lg"),{maxWidth:150,overflow:"hidden",textOverflow:"ellipsis"}),aniCell:{whiteSpace:"nowrap"},loadingWrapper:{paddingTop:50,borderBottom:"none"},dialogContent:{paddingTop:"10px!important"},loadingFab:{position:"absolute"}}}));var an=function(){var e=nn(),t=Object(l.i)().source,n=Object(l.h)(),r=n.search,c=n.pathname,i=Object(l.g)(),o=Object(a.useState)({}),s=Object(_.a)(o,2),d=s[0],u=s[1],j=Object(a.useState)(0),b=Object(_.a)(j,2),h=b[0],m=b[1],O=Object(a.useState)(25),f=Object(_.a)(O,2),x=f[0],g=f[1],v=Object(a.useState)(0),w=Object(_.a)(v,2),C=w[0],S=w[1],T=Object(a.useState)(!1),F=Object(_.a)(T,2),D=F[0],N=F[1],k=Yt(),A=k.toggle,B=k.clear,P=k.currentAudio,E=k.playing,R=k.loading,W=Object(a.useState)(!1),z=Object(_.a)(W,2),U=z[0],H=z[1],J=Object(a.useState)([]),G=Object(_.a)(J,2),X=G[0],$=G[1],ee=en(),te=Object(a.useRef)(null),ne=new URLSearchParams(r),ae={callId:ne.get("callId"),segmentId:ne.get("segmentId"),sessionId:ne.get("sessionId"),ani:ne.get("ani"),dnis:ne.get("dnis"),agentId:ne.get("agentId"),campaignId:ne.get("campaignId"),dateFrom:ne.get("dateFrom"),dateTo:ne.get("dateTo")};Object(a.useEffect)((function(){(function(){var e=Object(Q.a)(K.a.mark((function e(){var n,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d[C]){e.next=2;break}return e.abrupt("return");case 2:return n=t===gt.Source.INTERACTIONS?pt:Te,e.next=5,n.getAudioList(new URLSearchParams(r),C,x);case 5:a=e.sent,u(Object(Z.a)(Object(Z.a)({},d),{},Object(Fe.a)({},C,a.content))),m(a.page.total);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r,C,x]),Object(a.useEffect)((function(){var e;null===(e=te.current)||void 0===e||e.scrollTo({top:0})}),[C]);var re=function(){var e=Object(Q.a)(K.a.mark((function e(n){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $([].concat(Object(qe.a)(X),[n.id])),e.next=3,tn.downloadAudio(t,n.id);case 3:$((function(e){return e.filter((function(e){return e!==n.id}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(M.a,{className:e.container,children:[Object(L.jsxs)(Y.a,{direction:"row",spacing:0,sx:{width:"100%",alignItems:"center"},justifyContent:"space-between",children:[Object(L.jsx)(y.a,{onClick:function(){B(),i.push("/audio/".concat(t))},startIcon:Object(L.jsx)(ot.a,{}),children:"Back to Search"}),Object(L.jsx)(I.a,{variant:"body2",textAlign:"center",children:Object(L.jsxs)("b",{children:["You're looking through ",t===gt.Source.FIVE9?"Five9":"Interactions"," files"]})})]}),Object(L.jsx)(q.a,{className:e.card,children:Object(L.jsxs)(p.a,{container:!0,spacing:2,justifyContent:"space-between",alignItems:"center","data-testid":"filter-info",children:[Object(L.jsx)(p.a,{item:!0,className:e.filterInfo,children:Object(L.jsx)($t,{source:t,filterParams:ae})}),Object(L.jsx)(p.a,{item:!0,children:Object(L.jsx)(y.a,{variant:"outlined",onClick:function(){return N(!0)},children:"Update Parameters"})})]})}),Object(L.jsx)(Je.a,{className:e.table,ref:te,children:Object(L.jsxs)(Ge.a,{children:[Object(L.jsx)(Qt,{canDownload:ee}),Object(L.jsxs)(Xe.a,{children:[d&&d[C]&&!d[C].length&&Object(L.jsx)($e.a,{children:Object(L.jsx)(Ke.a,{colSpan:t===gt.Source.INTERACTIONS?6:8,align:"center",className:e.loadingWrapper,children:"No Content"})}),d&&d[C]?d[C].map((function(n){return Object(L.jsxs)($e.a,{className:(null===P||void 0===P?void 0:P.id)===n.id?e.selectedRow:"",children:[Object(L.jsx)(Ke.a,{"data-testid":"call-id",children:n.callId}),t===gt.Source.INTERACTIONS&&Object(L.jsx)(Ke.a,{className:e.longIdCell,"data-testid":"segment-id",children:n.segmentId}),t===gt.Source.FIVE9&&Object(L.jsx)(Ke.a,{className:e.longIdCell,"data-testid":"session-id",children:n.sessionId}),t===gt.Source.FIVE9&&Object(L.jsx)(Ke.a,{"data-testid":"agent",children:ke(n.agentFirstName,n.agentLastName)}),t===gt.Source.FIVE9&&Object(L.jsx)(Ke.a,{"data-testid":"campaign",children:n.campaign}),Object(L.jsx)(Ke.a,{className:e.aniCell,"data-testid":"ani",children:n.ani?be(n.ani):"-"}),Object(L.jsx)(Ke.a,{"data-testid":"date-of-call",children:Object(lt.a)(new Date(n.dateOfCall),"MM/dd/yyyy HH:mm:ss")}),Object(L.jsx)(Ke.a,{"data-testid":"play-container",children:Object(L.jsxs)(Y.a,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",children:[Object(L.jsx)(I.a,{"data-testid":"audio-duration",children:Ht(n.callDuration)}),Object(L.jsx)(Qe.a,{size:"small",color:"secondary",onClick:function(){return A(n)},disabled:(null===P||void 0===P?void 0:P.id)===n.id&&R,children:(null===P||void 0===P?void 0:P.id)===n.id?Object(L.jsxs)(L.Fragment,{children:[R&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ht.a,{}),Object(L.jsx)(V.a,{className:e.loadingFab})]}),!R&&E&&Object(L.jsx)(jt.a,{}),!R&&!E&&Object(L.jsx)(dt.a,{})]}):Object(L.jsx)(dt.a,{})})]})}),Object(L.jsx)(Ke.a,{"data-testid":"sharing",children:Object(L.jsx)(_e.a,{title:"Copy link to this audio",children:Object(L.jsx)(et.a,{color:"secondary","aria-label":"copy link",onClick:function(){return function(e){var t=new URLSearchParams;t.set("callId",e.callId),e.segmentId&&t.set("segmentId",e.segmentId),e.sessionId&&t.set("sessionId",e.sessionId),navigator.clipboard.writeText("".concat(window.location.protocol,"//").concat(window.location.host).concat(c,"?").concat(t.toString())).then((function(){return H(!0)}))}(n)},children:Object(L.jsx)(Ot.a,{})})})}),ee&&Object(L.jsx)(Ke.a,{"data-testid":"download",children:Object(L.jsx)(_e.a,{title:"Download audio file",children:Object(L.jsxs)(et.a,{color:"secondary","aria-label":"download file",onClick:function(){return re(n)},disabled:X.includes(n.id),children:[Object(L.jsx)(xt.a,{}),X.includes(n.id)&&Object(L.jsx)(V.a,{color:"secondary",className:e.loadingFab})]})})})]},n.id)})):Object(L.jsx)($e.a,{children:Object(L.jsx)(Ke.a,{colSpan:t===gt.Source.INTERACTIONS?6:8,align:"center",className:e.loadingWrapper,children:Object(L.jsx)(V.a,{})})})]})]})}),Object(L.jsx)(ie.a,{}),Object(L.jsx)(tt.a,{rowsPerPageOptions:[5,10,25],component:"div",count:h,rowsPerPage:x,page:C,onPageChange:function(e,t){S(t)},onRowsPerPageChange:function(e){S(0),u({}),g(parseInt(e.target.value,10))}}),Object(L.jsx)(qt,{})]}),Object(L.jsxs)(nt.a,{open:D,onClose:function(){return N(!1)},maxWidth:"md","aria-labelledby":"change-filter-dialog-title",children:[Object(L.jsx)(at.a,{id:"change-filter-dialog-title",children:"Change Filter"}),Object(L.jsx)(rt.a,{className:e.dialogContent,children:Object(L.jsx)(Jt,{source:t,filterParams:ae,close:function(){return N(!1)},submit:function(){S(0),u({})}})})]}),Object(L.jsx)(ct.a,{open:U,autoHideDuration:3e3,onClose:function(){return H(!1)},message:"Link copied"})]})};var rn=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(_.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)({}),l=Object(_.a)(o,2),s=l[0],d=l[1],u=Object(a.useState)({src:null,playing:!1,loading:!1}),j=Object(_.a)(u,2),b=j[0],h=j[1],m=Object(a.useRef)(new Map),O=Object(a.useRef)(null),f=Object(a.useRef)(null);return Object(L.jsx)(De.Provider,{value:{campaigns:c,agents:s,setCampaigns:i,setAgents:d,audio:b,setAudio:h,cache:m,audioElement:O,currentAudio:f},children:t})};P.setupInterceptors();var cn=function(){var e=Object(a.useMemo)((function(){return Object(m.a)({components:{MuiPaper:{styleOverrides:{root:{backgroundColor:"#424242",backgroundImage:"unset"}}}},palette:{mode:"dark",primary:{main:s.a[500]},secondary:{main:d.a[100],contrastText:"rgba(0, 0, 0, 0.87)"},error:{main:u.a[300]},background:{default:"#303030"}}})}),[]);return Object(L.jsx)(j.a,{theme:e,children:Object(L.jsx)(rn,{children:Object(L.jsx)(b.a,{injectFirst:!0,children:Object(L.jsxs)(O.b,{dateAdapter:f.a,children:[Object(L.jsx)(h.a,{}),Object(L.jsx)(R,{}),Object(L.jsx)(o.a,{children:Object(L.jsx)(a.Suspense,{fallback:Object(L.jsx)(z,{}),children:Object(L.jsxs)(l.d,{children:[Object(L.jsx)(l.b,{path:"/audio/server-error",exact:!0,component:H}),Object(L.jsx)(l.b,{path:"/audio/list/:source",component:an}),Object(L.jsx)(l.b,{path:"/audio",component:Ze})]})})})]})})})})},on=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,527)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(cn,{})}),document.getElementById("root")),on()}},[[402,1,2]]]);
//# sourceMappingURL=main.74da2010.chunk.js.map